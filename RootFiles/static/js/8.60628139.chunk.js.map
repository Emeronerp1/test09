{"version":3,"sources":["pages/LoadForInspection.js","services/BackendService.js","config/toast.js"],"names":["Dashboard","params","useParams","useHistory","useState","disable","setDisable","requests","setRequests","modalStyle","setmodalStyle","backdropStyle","setbackdropStyle","UnitId","parseInt","unitId","PropertyTypeId","IndexCode","Result","UCId","ucId","Remarks","Image","CheckList","setCheckList","isFetching","setIsFetching","closeModal","row","toBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","e","a","target","files","columns","dataField","text","formatter","cell","rowIndex","formatExtraData","className","events","onClick","column","columnIndex","console","log","openModal","sort","headerStyle","colum","colIndex","width","textAlign","href","alt","src","paginationFactory","sizePerPage","hideSizePerPage","prePageText","nextPageText","withFirstAndLast","hidePageListOnlyOnePage","useEffect","BackendService","getLoadForInspection","then","response","data","JSON","parse","duration","height","count","bootstrap4","keyField","striped","condensed","defaultSorted","order","style","id","tabIndex","role","aria-labelledby","aria-hidden","type","data-dismiss","aria-label","onSubmit","preventDefault","InsertCheckListResults","status","statusCode","toast","success","config","catch","appearance","autoDismiss","request","message","htmlFor","onChange","Boolean","value","onInput","defaultValue","disabled","apiBase","process","axios","interceptors","use","user","localStorage","getItem","token","headers","Authorization","post","get","borderRadius","background","fontSize","color"],"mappings":"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","file":"static/js/8.60628139.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport BackendService from \"../services/BackendService\";\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport ToolkitProvider, { Search } from 'react-bootstrap-table2-toolkit';\nimport paginationFactory from 'react-bootstrap-table2-paginator';\nimport { Link, useHistory, useParams } from 'react-router-dom';\nimport Skeleton, { SkeletonTheme } from 'react-loading-skeleton'\nimport 'react-loading-skeleton/dist/skeleton.css'\nimport toast from 'react-hot-toast';\nimport config from \"../config/toast\";\n\n\nexport default function Dashboard() {\n  const params = useParams()\n  const history = useHistory();\n  const [disable, setDisable] = useState(false);\n  const [requests, setRequests] = useState([]);\n  const [modalStyle, setmodalStyle] = useState({\"display\": \"none\", \"padding-left\": \"0px;\"});\n  const [backdropStyle, setbackdropStyle] = useState({\"display\": \"none\"});\n\n  // Insert params\n  const [CheckList, setCheckList] = useState({\n    UnitId: parseInt(params.unitId),\n    PropertyTypeId: 0,\n    IndexCode: '',\n    Result: true,\n    UCId: parseInt(params.ucId),\n    Remarks: '',\n    Image: ''\n  });\n  \n  const [isFetching, setIsFetching] = useState(true);\n\n\n  const openModal = (row) => {\n      var PropertyTypeId = row.PropertyTypeId;\n      var IndexCode = row.IndexCode;\n      var Remarks = '';\n      var Image = '';\n      setCheckList({...CheckList, PropertyTypeId, IndexCode, Remarks, Image})\n      console.log(CheckList)\n      setmodalStyle({\"display\": \"block\", \"padding-left\": \"0px;\"});\n      setbackdropStyle({\"display\": \"block\"});\n  }\n  const closeModal = (row) => {\n      setmodalStyle({\"display\": \"none\", \"padding-left\": \"0px;\"});\n      setbackdropStyle({\"display\": \"none\"});\n  }\n\n  const setRemarks = (e) => {\n    var Remarks = e.target.value;\n    setCheckList({...CheckList, Remarks});\n  }\n\n  const setResult = (e) => {\n    var Result = Boolean(parseInt(e.target.value));\n    setCheckList({...CheckList, Result});\n  }\n\n  const toBase64 = file => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n  });\n\n  async function setImage(e) {\n    const file = e.target.files[0];\n    var Image = await toBase64(file);\n    setCheckList({...CheckList, Image});\n }\n\n  const columns = [{\n    dataField: 'Action',\n    text: 'ACTION',\n    formatter: (cell, row, rowIndex, formatExtraData) => {\n        \n      return (\n          <button className=\"btn btn-primary\"\n          >Insert CheckList\n          </button>\n      )\n    },\n    events: {\n        onClick: (e, column, columnIndex, row, rowIndex) =>  { openModal(row) }\n    }}, {\n    dataField: 'UnitType',\n    text: 'Uunit Type',\n    sort: true\n  }, {\n    dataField: 'IndexCode',\n    text: 'Index Code',\n    sort: true\n  }, {\n    dataField: 'CodeName',\n    text: 'Code Name',\n    sort: true\n  }, {\n    dataField: 'MainOrSub',\n    text: 'Main Or Sub',\n    sort: true\n  }, {\n    dataField: 'Criterias',\n    text: 'Criterias',\n    sort: true,\n    headerStyle: (colum, colIndex) => {\n        return { width: '80px', textAlign: 'left' };\n      }\n  }, {\n    dataField: 'Remarks',\n    text: 'Remarks',\n    sort: true\n  }, {\n    dataField: 'Result',\n    text: 'Result',\n    sort: true\n  },{\n    dataField: 'Image',\n    text: 'Image',\n    formatter: (cell, row, rowIndex, formatExtraData) => {\n        \n      return (\n        row.Image ?  (\n          <a href={row.Image} target=\"_blank\" ><img alt src={row.Image} /></a>\n        ) : ( <a></a> )\n\n      );\n    }\n  }];\n  \n  const defaultSorted = [{\n    dataField: 'name',\n    order: 'desc'\n  }];\n\n  const pagination = paginationFactory({\n    sizePerPage: 2,\n    hideSizePerPage: true,\n    prePageText: \"Previous\",\n    nextPageText: \"Next\",\n    withFirstAndLast: false,\n    hidePageListOnlyOnePage: false\n  });\n\n  useEffect(() => {\n    BackendService\n      .getLoadForInspection({UnitId: parseInt(params.unitId), UCId: parseInt(params.ucId)})\n      .then((response) => {\n        setIsFetching(false);\n        console.log(response.data.data.data);\n        setRequests(JSON.parse(response.data.data.data));\n      });\n  }, []);\n\n  const doPost = (e) => {\n    e.preventDefault();\n    setDisable(true);\n    BackendService\n      .InsertCheckListResults(CheckList)\n      .then((response) => {\n        setDisable(false);\n          if (response.status === 200 && response.data.statusCode === 200) {\n            toast.success('Successfully Inserted CheckList.', config);\n            closeModal();\n          } else {\n            toast.error('Incorrect username or password. Please try again.', config);\n          }\n      })\n      .catch((error) => {\n          console.log(error)\n        // Error\n        if (error.response) {\n            // The request was made and the server responded with a status code\n            // that falls out of the range of 2xx\n            // console.log(error.response.data);\n            // console.log(error.response.status);\n            // console.log(error.response.headers);\n            toast.error(\"There is a problem while calling the api request.\", { appearance: 'error', autoDismiss: true });\n            //addToast(\"Incorrect username or password. Please try again.\", { appearance: 'error', autoDismiss: true });\n        } else if (error.request) {\n            // The request was made but no response was received\n            // `error.request` is an instance of XMLHttpRequest in the \n            // browser and an instance of\n            // http.ClientRequest in node.js\n            toast.error(\"Network problems happen when something disrupts the connection between your computer and the content you're trying to access.\", { appearance: 'error', autoDismiss: true });\n        } else {\n            // Something happened in setting up the request that triggered an Error\n            toast.error('Error', error.message);\n        }\n      });\n    e.preventDefault();\n  };\n\n    return (\n        <div className=\"container-fluid page-body-wrapper\">\n        <div className=\"main-panel\">\n          <div className=\"content-wrapper\">\n            <div className=\"row\">\n\n              <div className=\"col-lg-12 grid-margin stretch-card\">\n                <div className=\"card\">\n                  <div className=\"card-body\">\n                    <h4 className=\"card-title\">Inspection Process</h4>\n                    <div className=\"table-responsive\">\n                    { isFetching ? (\n                        <Skeleton duration={3} height={30} count={50} />\n                    ) : (\n                    <>\n                    <BootstrapTable\n                        bootstrap4\n                        keyField=\"id\"\n                        data={ requests }\n                        striped\n                        condensed\n                        columns={ columns }\n                        defaultSorted={ defaultSorted }\n                      />\n                    </>\n                    ) }\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n          </div>\n        </div>\n        <div className=\"modal-backdrop fade show\" style={backdropStyle}></div>\n        <div className=\"modal fade show\" id=\"exampleModal-4\" style={modalStyle} tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel-4\" aria-hidden=\"true\">\n        <div className=\"modal-dialog\" role=\"document\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\" id=\"exampleModalLabel-4\">Insert CheckList Results</h5>\n              <button type=\"button\" onClick={closeModal} className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">Ã—</span>\n              </button>\n            </div>\n            <form onSubmit={doPost}>\n            <div className=\"modal-body\">\n              \n                <div className=\"form-group\">\n                  <label htmlFor=\"recipient-name\" className=\"col-form-label\">Status:</label>\n                  <select type=\"text\" onChange={setResult} className=\"form-control\" id=\"recipient-name\" >\n                      <option value=\"1\">True</option>\n                      <option value=\"0\">False</option>\n                  </select>\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"message-text\" className=\"col-form-label\">Remarks:</label>\n                  <textarea className=\"form-control\" value={CheckList.Remarks} onInput={setRemarks}  id=\"message-text\" defaultValue={\"\"} />\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"message-text\" className=\"col-form-label\">Choose Image</label>\n                  <input type=\"file\" onChange={setImage} className=\"form-control\" id=\"input-file\" defaultValue={\"\"} />\n                </div>\n              \n            </div>\n            <div className=\"modal-footer\">\n              <button type=\"submit\" disabled={disable} className=\"btn btn-success\">Submit</button>\n              <button type=\"button\" onClick={closeModal} className=\"btn btn-light\" data-dismiss=\"modal\">Close</button>\n            </div>\n            </form>\n          </div>\n        </div>\n      </div>\n        </div>\n    )\n}\n","import axios from 'axios';\n\nconst apiBase = process.env.REACT_APP_API_URL;\n\n// Add a request interceptor\naxios.interceptors.request.use( config => {\n  const user = JSON.parse(localStorage.getItem('userData')) || {};\n\n  if(user && user.token){\n    const token = 'Bearer ' + user.token;\n    config.headers.Authorization =  token;\n  }\n  return config;\n});\n\nclass BackendService {\n  async getDashBoard() {\n    return await axios.post(apiBase + \"/app/LoadAssignedList\");\n  }\n\n  async getScheduledList() {\n    return await axios.post(apiBase + \"/app/ScheduledList\");\n  }\n  async getLoadForInspection(data) {\n    return await axios.post(apiBase + \"/app/LoadForInspection\", data);\n  }\n  async InsertCheckListResults(data) {\n    return await axios.post(apiBase + \"/app/InsertCheckListResults\", data);\n  }\n\n  async getInspectedList() {\n    return await axios.post(apiBase + \"/app/VisitedHistory\");\n  }\n\n  async getReScheduledList() {\n    return await axios.post(apiBase + \"/app/ReScheduledList\");\n  }\n\n  async ScheduleSiteVisit(data) {\n    return await axios.post(apiBase + \"/app/ScheduleSiteVisit\", data);\n  }\n\n  async getPmBoard() {\n    return await axios.get(\"/api/test/pm\");\n  }\n\n  async getAdminBoard() {\n    return await axios.get(\"/api/test/admin\");\n  }\n}\n\nexport default new BackendService();","import React from 'react';\n\n\nconst config = {\n    style: {\n        borderRadius: '10px',\n        background: '#333',\n        fontSize: '14px',\n        color: '#fff'\n    }\n};\n\nexport default config;"],"sourceRoot":""}