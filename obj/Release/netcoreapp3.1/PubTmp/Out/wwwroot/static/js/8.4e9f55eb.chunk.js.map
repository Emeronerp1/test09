{"version":3,"sources":["pages/LoadForInspection.js","services/BackendService.js","config/toast.js"],"names":["Dashboard","params","useParams","history","useHistory","useState","disable","setDisable","requests","setRequests","rcount","setRcount","imgSrc","setImgSrc","modalStyle","setmodalStyle","modalStyle2","setmodalStyle2","modalStyle3","setmodalStyle3","modalStyle4","setmodalStyle4","backdropStyle","setbackdropStyle","backdropStyle2","setbackdropStyle2","CSVExport","ExportCSVButton","UnitId","parseInt","unitId","PropertyTypeId","IndexCode","Result","UCId","ucId","Remarks","Image","CheckList","setCheckList","Comments","Inspection","setInspection","isFetching","setIsFetching","handleSuccess","stream","video","document","getElementById","console","log","window","srcObject","flip","a","constraints","audio","width","height","facingMode","exact","navigator","mediaDevices","getUserMedia","closeModal","row","closeModal1","toBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","e","target","files","value","columns","dataField","text","sort","formatter","cell","rowIndex","formatExtraData","className","Criterias","events","onClick","column","columnIndex","openModal","alt","src","openModal4","paginationFactory","sizePerPage","hideSizePerPage","prePageText","nextPageText","withFirstAndLast","hidePageListOnlyOnePage","useEffect","BackendService","getLoadForInspection","then","response","JSON","parse","data","duration","count","bootstrap4","keyField","striped","condensed","defaultSorted","order","class","type","style","id","tabIndex","role","aria-labelledby","aria-hidden","playsinline","loop","autoPlay","canvas","getContext","drawImage","toDataURL","data-dismiss","aria-label","onSubmit","preventDefault","InsertCheckListResults","status","statusCode","toast","success","config","Math","floor","random","catch","appearance","autoDismiss","request","message","htmlFor","onChange","Boolean","onInput","defaultValue","flipBtn","querySelector","getSupportedConstraints","disabled","alert","init","for","accept","CompleteInspection","push","apiBase","process","axios","interceptors","use","user","localStorage","getItem","token","headers","Authorization","post","get","borderRadius","background","fontSize","color"],"mappings":"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","file":"static/js/8.4e9f55eb.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport BackendService from \"../services/BackendService\";\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport ToolkitProvider, { CSVExport } from 'react-bootstrap-table2-toolkit';\nimport paginationFactory from 'react-bootstrap-table2-paginator';\nimport { Link, useHistory, useParams } from 'react-router-dom';\nimport Skeleton, { SkeletonTheme } from 'react-loading-skeleton'\nimport 'react-loading-skeleton/dist/skeleton.css'\nimport toast from 'react-hot-toast';\nimport config from \"../config/toast\";\n\n\nexport default function Dashboard() {\n  const params = useParams()\n  const history = useHistory();\n  const [disable, setDisable] = useState(false);\n  const [requests, setRequests] = useState([]);\n  const [rcount, setRcount] = useState(0);\n  const [imgSrc, setImgSrc] = useState(0);\n  const [modalStyle, setmodalStyle] = useState({\"display\": \"none\", \"padding-left\": \"0px;\"});\n  const [modalStyle2, setmodalStyle2] = useState({\"display\": \"none\", \"padding-left\": \"0px;\"});\n  const [modalStyle3, setmodalStyle3] = useState({\"display\": \"none\", \"padding-left\": \"0px;\"});\n  const [modalStyle4, setmodalStyle4] = useState({\"display\": \"none\", \"padding-left\": \"0px;\"});\n  const [backdropStyle, setbackdropStyle] = useState({\"display\": \"none\"});\n  const [backdropStyle2, setbackdropStyle2] = useState({\"display\": \"none\"});\n\n  const { ExportCSVButton } = CSVExport;\n\n  // Insert params\n  const [CheckList, setCheckList] = useState({\n    UnitId: parseInt(params.unitId),\n    PropertyTypeId: 0,\n    IndexCode: '',\n    Result: true,\n    UCId: parseInt(params.ucId),\n    Remarks: '',\n    Image: ''\n  });\n\n  const [Inspection, setInspection] = useState({\n    UnitId: parseInt(params.unitId),\n    UCId: parseInt(params.ucId),\n    Comments: '',\n  });\n\n  const [isFetching, setIsFetching] = useState(true);\n\n\n  const openModal = (row) => {\n      var PropertyTypeId = row.PropertyTypeId;\n      var IndexCode = row.IndexCode;\n      var Remarks = '';\n      var Image = '';\n      setCheckList({...CheckList, PropertyTypeId, IndexCode, Remarks, Image})\n      setmodalStyle({\"display\": \"block\", \"padding-left\": \"0px;\"});\n      setbackdropStyle({\"display\": \"block\"});\n  }\n\n  const openModal4 = (row) => {\n    setImgSrc(row.Image)\n    setmodalStyle4({\"display\": \"block\", \"padding-left\": \"0px;\"});\n    setbackdropStyle({\"display\": \"block\"});\n}\n\n  const openModal2 = (row) => {\n    setmodalStyle2({\"display\": \"block\", \"padding-left\": \"0px;\"});\n    setbackdropStyle({\"display\": \"block\"});\n}\nfunction handleSuccess(stream) {\n  const video = document.getElementById('video');\n  console.log('getUserMedia() got stream:', stream);\n  window.stream = stream;\n  video.srcObject = stream;\n  setmodalStyle3({\"display\": \"block\", \"padding-left\": \"0px;\"});\n  setbackdropStyle2({\"display\": \"block\"});\n}\nconst openModal3 = (row) => {\n  var flipBtn = document.querySelector('#flip-btn');\n  var supports = navigator.mediaDevices.getSupportedConstraints();\n  if( supports['facingMode'] === true ) {\n    flipBtn.disabled = false;\n  }\n  const constraints = {\n    audio: false,\n    video: {\n      width: 500, height: 400\n    }\n  };\n  async function init() {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\n      handleSuccess(stream);\n      closeModal1();\n    } catch (e) {\n      alert('navigator.getUserMedia error:', e);\n\n    }\n  }\n  // Load init\n  init();\n}\n\nconst flip = async () => {\n  const constraints = {\n    audio: false,\n    video: {\n      width: 500, height: 400\n    }\n  };\n  constraints.video = {\n    facingMode: {\n      exact: \"environment\"\n    },\n    width: 500,\n    height: 400 \n  };\n  const stream = await navigator.mediaDevices.getUserMedia(constraints);\n  handleSuccess(stream);\n}\n  const closeModal = (row) => {\n      setmodalStyle({\"display\": \"none\", \"padding-left\": \"0px;\"});\n      setmodalStyle2({\"display\": \"none\", \"padding-left\": \"0px;\"});\n      setmodalStyle4({\"display\": \"none\", \"padding-left\": \"0px;\"});\n      setbackdropStyle({\"display\": \"none\"});\n  }\n\n  const closeModal1 = (row) => {\n    setmodalStyle({\"display\": \"none\", \"padding-left\": \"0px;\"});\n    setbackdropStyle({\"display\": \"none\"});\n}\n\nconst closeModal3 = (row) => {\n  setmodalStyle3({\"display\": \"none\", \"padding-left\": \"0px;\"});\n  setbackdropStyle2({\"display\": \"none\"});\n  setmodalStyle({\"display\": \"block\", \"padding-left\": \"0px;\"});\n      setbackdropStyle({\"display\": \"block\"});\n}\n\n\n  const setRemarks = (e) => {\n    var Remarks = e.target.value;\n    setCheckList({...CheckList, Remarks});\n  }\n\n  const setResult = (e) => {\n    var Result = Boolean(parseInt(e.target.value));\n    setCheckList({...CheckList, Result});\n  }\n\n  const toBase64 = file => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n  });\n\n  const capture = (e) => {\n    const video = document.getElementById('video');\n    var canvas = document.getElementById('canvas');\n    var context = canvas.getContext('2d');\n    context.drawImage(video, 0, 0, 640, 480);\n    var Image = canvas.toDataURL();\n    console.log(Image);\n    setCheckList({...CheckList, Image});\n    setmodalStyle3({\"display\": \"none\", \"padding-left\": \"0px;\"});\n    setbackdropStyle2({\"display\": \"none\"});\n    setmodalStyle({\"display\": \"block\", \"padding-left\": \"0px;\"});\n        setbackdropStyle({\"display\": \"block\"});\n  }\n\n  async function setImage(e) {\n    const file = e.target.files[0];\n    var Image = await toBase64(file);\n    setCheckList({...CheckList, Image});\n }\n async function setComments(e) {\n  const Comments = e.target.value;\n  setInspection({...Inspection, Comments});\n}\n\n  const columns = [{\n    dataField: 'UnitType',\n    text: 'Unit Type',\n    sort: false\n  }, {\n    dataField: 'IndexCode',\n    text: 'Index Code',\n    sort: false\n  }, {\n    dataField: 'CodeName',\n    text: 'Code Name',\n    sort: false\n  }, {\n    dataField: 'MainOrSub',\n    text: 'Main Or Sub',\n    sort: false\n  }, {\n    dataField: 'Criterias',\n    text: 'Criterias',\n    sort: false,\n    formatter: (cell, row, rowIndex, formatExtraData) => {\n        \n      return (\n          <div className=\"criterias\">{row.Criterias}</div>\n      )\n    },\n  }, {\n    dataField: 'Action',\n    text: 'Action',\n    formatter: (cell, row, rowIndex, formatExtraData) => {\n        \n      return (\n          <button className=\"btn btn-primary\"\n          >Result\n          </button>\n      )\n    },\n    events: {\n        onClick: (e, column, columnIndex, row, rowIndex) =>  { openModal(row) }\n    }}, {\n    dataField: 'Remarks',\n    text: 'Remarks',\n    sort: false\n  }, {\n    dataField: 'Result',\n    text: 'Result',\n    sort: false,\n    formatter: (cell, row, rowIndex, formatExtraData) => {\n        \n      return (\n        row.Result ? (\n          <div className=\"badge badge-success\">Yes</div>\n        ) : (\n          <div className=\"badge badge-danger\">No</div>\n        )\n      )\n    },\n  },{\n    dataField: 'Image',\n    text: 'Image',\n    formatter: (cell, row, rowIndex, formatExtraData) => {\n        \n      return (\n        row.Image ?  (\n          <a ><img alt src={row.Image} /></a>\n        ) : ( <a></a> )\n\n      );\n    },\n    events: {\n      onClick: (e, column, columnIndex, row, rowIndex) =>  { openModal4(row) }\n  }\n  }];\n  \n  const defaultSorted = [{\n    dataField: 'name',\n    order: 'desc'\n  }];\n\n  const pagination = paginationFactory({\n    sizePerPage: 2,\n    hideSizePerPage: true,\n    prePageText: \"Previous\",\n    nextPageText: \"Next\",\n    withFirstAndLast: false,\n    hidePageListOnlyOnePage: false\n  });\n\n  useEffect(() => {\n    BackendService\n      .getLoadForInspection({UnitId: parseInt(params.unitId), UCId: parseInt(params.ucId)})\n      .then((response) => {\n        setIsFetching(false);\n        setRequests(JSON.parse(response.data.data.data));\n      });\n      \n  }, [rcount]);\n\n  const doPost = (e) => {\n    e.preventDefault();\n    setDisable(true);\n    BackendService\n      .InsertCheckListResults(CheckList)\n      .then((response) => {\n        setDisable(false);\n          if (response.status === 200 && response.data.statusCode === 200) {\n            toast.success('Successfully Updated.', config);\n            // setRequests([]);\n            setIsFetching(true);\n            setRcount(Math.floor(Math.random() * (10 - 1 + 1) + 1));\n            closeModal();\n          } else {\n            toast.error('Error calling api', config);\n          }\n      })\n      .catch((error) => {\n        // Error\n        if (error.response) {\n            // The request was made and the server responded with a status code\n            // that falls out of the range of 2xx\n            // console.log(error.response.data);\n            // console.log(error.response.status);\n            // console.log(error.response.headers);\n            toast.error(\"There is a problem while calling the api request.\", { appearance: 'error', autoDismiss: true });\n            //addToast(\"Incorrect username or password. Please try again.\", { appearance: 'error', autoDismiss: true });\n        } else if (error.request) {\n            setIsFetching(true);\n            closeModal();\n            // The request was made but no response was received\n            // `error.request` is an instance of XMLHttpRequest in the \n            // browser and an instance of\n            // http.ClientRequest in node.js\n            toast.error(\"Network problems happen when something disrupts the connection between your computer and the content you're trying to access.\", { appearance: 'error', autoDismiss: true });\n        } else {\n            // Something happened in setting up the request that triggered an Error\n            toast.error('Error', error.message);\n        }\n      });\n    e.preventDefault();\n  };\n\n  const doCompleteInspection = (e) => {\n    e.preventDefault();\n    setDisable(true);\n    BackendService\n      .CompleteInspection(Inspection)\n      .then((response) => {\n        setDisable(false);\n          if (response.status === 200 && response.data.statusCode === 200) {\n            toast.success('You have been successfully submitted as Inspection completed.', config);\n            closeModal();\n            history.push('/scheduledList');\n          } else {\n            toast.error('Error while calling the api.', config);\n          }\n      })\n      .catch((error) => {\n          console.log(error)\n        // Error\n        if (error.response) {\n            // The request was made and the server responded with a status code\n            // that falls out of the range of 2xx\n            // console.log(error.response.data);\n            // console.log(error.response.status);\n            // console.log(error.response.headers);\n            toast.error(\"There is a problem while calling the api request.\", { appearance: 'error', autoDismiss: true });\n            //addToast(\"Incorrect username or password. Please try again.\", { appearance: 'error', autoDismiss: true });\n        } else if (error.request) {\n            // The request was made but no response was received\n            // `error.request` is an instance of XMLHttpRequest in the \n            // browser and an instance of\n            // http.ClientRequest in node.js\n            toast.error(\"Network problems happen when something disrupts the connection between your computer and the content you're trying to access.\", { appearance: 'error', autoDismiss: true });\n        } else {\n            // Something happened in setting up the request that triggered an Error\n            toast.error('Error', error.message);\n        }\n      });\n    e.preventDefault();\n  };\n\n    return (\n        <div className=\"container-fluid page-body-wrapper\">\n        <div className=\"main-panel\">\n          <div className=\"content-wrapper\">\n            <div className=\"row\">\n\n              <div className=\"col-lg-12 grid-margin stretch-card\">\n                <div className=\"card\">\n                  <div className=\"card-body\">\n                    <h4 className=\"card-title\">Inspection Process</h4>\n                    <div className=\"table-responsive\">\n                    { isFetching ? (\n                        <Skeleton duration={3} height={50} count={50} />\n                    ) : (\n                    <>\n                    <BootstrapTable\n                        bootstrap4\n                        keyField=\"id\"\n                        data={ requests }\n                        striped\n                        condensed\n                        columns={ columns }\n                        defaultSorted={ defaultSorted }\n                      />\n                    </>\n                    ) }\n                    </div>\n                  </div>\n                  { requests ? (\n                  <div class=\"text-center mb-5\">\n                    <button type=\"button\" class=\"btn btn-success btn-sm\" onClick={openModal2}>Complete Inspection<i class=\"icon-control-play ml-1\"></i></button>\n                  </div>\n                  ) : ( <></> ) }\n                </div>\n              </div>\n            </div>\n            \n          </div>\n          \n        </div>\n        <div className=\"modal-backdrop fade show\" style={backdropStyle2}></div>\n        <div className=\"modal fade show\" id=\"exampleModal-5\" style={modalStyle3} tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel-4\" aria-hidden=\"true\">\n        <div className=\"modal-dialog\" role=\"document\">\n          <div className=\"modal-content\">\n          <div class=\"video-wrap\">\n                    <video id=\"video\" playsinline loop autoPlay></video>\n                    <canvas id=\"canvas\" class=\"d-none\" width=\"630\" height=\"480\"></canvas>\n                </div>\n              <div className=\"modal-footer\">\n              <button type=\"submit\" id=\"flip-btn\" onClick={flip}  className=\"btn btn-info\">Switch Camera</button>\n              <button type=\"submit\" onClick={capture}  className=\"btn btn-primary\">Capture</button>\n              <button type=\"button\" onClick={closeModal3} className=\"btn btn-light\" data-dismiss=\"modal\">Close</button>\n            </div>\n          </div>\n        </div>\n      </div>\n        <div className=\"modal-backdrop fade show\" style={backdropStyle}></div>\n        <div className=\"modal fade show\" id=\"exampleModal-4\" style={modalStyle} tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel-4\" aria-hidden=\"true\">\n        <div className=\"modal-dialog\" role=\"document\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\" id=\"exampleModalLabel-4\">CheckList Results</h5>\n              <button type=\"button\" onClick={closeModal} className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">×</span>\n              </button>\n            </div>\n            <form onSubmit={doPost}>\n            <div className=\"modal-body pt-0\">\n              \n                <div className=\"form-group\">\n                  <label htmlFor=\"recipient-name\" className=\"col-form-label\">Result:</label>\n                  <select type=\"text\" onChange={setResult} className=\"form-control\" id=\"recipient-name\" >\n                      <option value=\"1\">Yes</option>\n                      <option value=\"0\">No</option>\n                  </select>\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"message-text\" className=\"col-form-label\">Remarks:</label>\n                  <textarea className=\"form-control\" value={CheckList.Remarks} onInput={setRemarks}  id=\"message-text\" defaultValue={\"\"} />\n                </div>\n                <div className=\"form-group\">\n                  { CheckList.Image ? ( <div><img height={100} src={CheckList.Image} /></div> ) : ( <></> )}\n                  <label htmlFor=\"message-text\" className=\"col-form-label d-none\">Capture Image</label>\n                  <button type=\"button\" class=\"btn d-none mr-4 btn-info\" onClick={openModal3}>Capture Image</button>\n                  <label for=\"input-file\" class=\"btn btn-info\" >Uplaod Image\n                  <input type=\"file\"  onChange={setImage} className=\"form-control d-none\" accept=\".png, .jpg, .jpeg\" id=\"input-file\" defaultValue={\"\"} /></label>\n                </div>\n              \n            </div>\n            <div className=\"modal-footer\">\n              <button type=\"submit\" disabled={disable} className=\"btn btn-success\">Submit</button>\n              <button type=\"button\" onClick={closeModal} className=\"btn btn-light\" data-dismiss=\"modal\">Close</button>\n            </div>\n            </form>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"modal fade show\" id=\"exampleModal-4\" style={modalStyle2} tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel-4\" aria-hidden=\"true\">\n        <div className=\"modal-dialog\" role=\"document\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\" id=\"exampleModalLabel-4\">Complete Inspection</h5>\n              <button type=\"button\" onClick={closeModal} className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">×</span>\n              </button>\n            </div>\n            <form onSubmit={doCompleteInspection}>\n            <div className=\"modal-body\">\n              \n                <div className=\"form-group\">\n                  <label htmlFor=\"message-text\" className=\"col-form-label\">Comments:</label>\n                  <textarea className=\"form-control\" value={Inspection.Comments} onInput={setComments}  id=\"message-text\" defaultValue={\"\"} />\n                </div>\n\n              \n            </div>\n            <div className=\"modal-footer\">\n              <button type=\"submit\" disabled={disable} disabled={!Inspection.Comments} className=\"btn btn-success\">Submit</button>\n              <button type=\"button\" onClick={closeModal}  className=\"btn btn-light\" data-dismiss=\"modal\">Close</button>\n            </div>\n            </form>\n          </div>\n        </div>\n      </div>\n      <div className=\"modal fade show\" id=\"exampleModal-4\" style={modalStyle4} tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel-4\" aria-hidden=\"true\">\n        <div className=\"modal-dialog\" role=\"document\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\" id=\"exampleModalLabel-4\">Image View</h5>\n              <button type=\"button\" onClick={closeModal} className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">×</span>\n              </button>\n            </div>\n            <div className=\"modal-body\">\n                    <img alt=\"\" src={imgSrc} width=\"300\" />\n            </div>\n            <div className=\"modal-footer\">\n              <button type=\"button\" onClick={closeModal}  className=\"btn btn-light\" data-dismiss=\"modal\">Close</button>\n            </div>\n          </div>\n        </div>\n      </div>\n        </div>\n    )\n}\n","import axios from 'axios';\n\nconst apiBase = process.env.REACT_APP_API_URL;\n\n// Add a request interceptor\naxios.interceptors.request.use( config => {\n  const user = JSON.parse(localStorage.getItem('userData')) || {};\n\n  if(user && user.token){\n    const token = 'Bearer ' + user.token;\n    config.headers.Authorization =  token;\n  }\n  return config;\n});\n\nclass BackendService {\n  async getDashBoard() {\n    return await axios.post(apiBase + \"/app/LoadAssignedList\");\n  }\n\n  async getScheduledList() {\n    return await axios.post(apiBase + \"/app/ScheduledList\");\n  }\n  async getLoadForInspection(data) {\n    return await axios.post(apiBase + \"/app/LoadForInspection\", data);\n  }\n  async InsertCheckListResults(data) {\n    return await axios.post(apiBase + \"/app/InsertCheckListResults\", data);\n  }\n\n  async CompleteInspection(data) {\n    return await axios.post(apiBase + \"/app/CompleteInspection\", data);\n  }\n\n  async getInspectedList() {\n    return await axios.post(apiBase + \"/app/VisitedHistory\");\n  }\n\n  async getReScheduledList() {\n    return await axios.post(apiBase + \"/app/ReScheduledList\");\n  }\n\n  async ScheduleSiteVisit(data) {\n    return await axios.post(apiBase + \"/app/ScheduleSiteVisit\", data);\n  }\n\n  async getInspectionReport(data) {\n    return await axios.post(apiBase + \"/app/Inspectedlist\", data);\n  }\n\n  async getPmBoard() {\n    return await axios.get(\"/api/test/pm\");\n  }\n\n  async getAdminBoard() {\n    return await axios.get(\"/api/test/admin\");\n  }\n}\n\nexport default new BackendService();","import React from 'react';\n\n\nconst config = {\n    style: {\n        borderRadius: '10px',\n        background: '#333',\n        fontSize: '14px',\n        color: '#fff'\n    }\n};\n\nexport default config;"],"sourceRoot":""}