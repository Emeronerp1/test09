(this.webpackJsonpc696_client_new=this.webpackJsonpc696_client_new||[]).push([[8],{261:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var n=a(12),s=a(48),r=a.n(s),c=a(49),i=a(13),o=a(11),l=a(1),d=a(45),u=a(53),p=a.n(u),b=a(54),m=a(55),j=a.n(m),h=a(2),f=a(56),x=(a(52),a(20)),O=a(57),v=a(0);function g(){var e,t=Object(h.i)(),a=Object(h.g)(),s=Object(l.useState)(!1),u=Object(o.a)(s,2),m=u[0],g=u[1],y=Object(l.useState)([]),k=Object(o.a)(y,2),N=k[0],I=k[1],w=Object(l.useState)(0),C=Object(o.a)(w,2),S=C[0],L=C[1],R=Object(l.useState)(0),F=Object(o.a)(R,2),M=F[0],P=F[1],U=Object(l.useState)({display:"none","padding-left":"0px;"}),D=Object(o.a)(U,2),E=D[0],B=D[1],T=Object(l.useState)({display:"none","padding-left":"0px;"}),V=Object(o.a)(T,2),A=V[0],q=V[1],z=Object(l.useState)({display:"none","padding-left":"0px;"}),J=Object(o.a)(z,2),_=J[0],Y=J[1],H=Object(l.useState)({display:"none","padding-left":"0px;"}),G=Object(o.a)(H,2),K=G[0],Q=G[1],W=Object(l.useState)({display:"none"}),X=Object(o.a)(W,2),Z=X[0],$=X[1],ee=Object(l.useState)({display:"none"}),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],se=(b.CSVExport.ExportCSVButton,Object(l.useState)({UnitId:parseInt(t.unitId),PropertyTypeId:0,IndexCode:"",Result:!0,UCId:parseInt(t.ucId),Remarks:"",Image:""})),re=Object(o.a)(se,2),ce=re[0],ie=re[1],oe=Object(l.useState)({UnitId:parseInt(t.unitId),UCId:parseInt(t.ucId),Comments:""}),le=Object(o.a)(oe,2),de=le[0],ue=le[1],pe=Object(l.useState)(!0),be=Object(o.a)(pe,2),me=be[0],je=be[1];function he(e){var t=document.getElementById("video");console.log("getUserMedia() got stream:",e),window.stream=e,t.srcObject=e,Y({display:"block","padding-left":"0px;"}),ne({display:"block"})}var fe=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t={audio:!1,video:{width:500,height:400}}).video={facingMode:{exact:"environment"},width:500,height:400},e.next=4,navigator.mediaDevices.getUserMedia(t);case 4:he(e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(e){B({display:"none","padding-left":"0px;"}),q({display:"none","padding-left":"0px;"}),Q({display:"none","padding-left":"0px;"}),$({display:"none"})},Oe=function(e){B({display:"none","padding-left":"0px;"}),$({display:"none"})},ve=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))};function ge(){return(ge=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],e.next=3,ve(a);case 3:n=e.sent,ie(Object(i.a)(Object(i.a)({},ce),{},{Image:n}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return(ye=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,ue(Object(i.a)(Object(i.a)({},de),{},{Comments:a}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=[{dataField:"UnitType",text:"Unit Type",sort:!1},{dataField:"IndexCode",text:"Index Code",sort:!1},{dataField:"CodeName",text:"Code Name",sort:!1},{dataField:"MainOrSub",text:"Main Or Sub",sort:!1},{dataField:"Criterias",text:"Criterias",sort:!1,formatter:function(e,t,a,n){return Object(v.jsx)("div",{className:"criterias",children:t.Criterias})}},{dataField:"Action",text:"Action",formatter:function(e,t,a,n){return Object(v.jsx)("button",{className:"btn btn-primary",children:"Result"})},events:{onClick:function(e,t,a,n,s){!function(e){var t=e.PropertyTypeId,a=e.IndexCode;ie(Object(i.a)(Object(i.a)({},ce),{},{PropertyTypeId:t,IndexCode:a,Remarks:"",Image:""})),B({display:"block","padding-left":"0px;"}),$({display:"block"})}(n)}}},{dataField:"Remarks",text:"Remarks",sort:!1},{dataField:"Result",text:"Result",sort:!1,formatter:function(e,t,a,n){return t.Result?Object(v.jsx)("div",{className:"badge badge-success",children:"Yes"}):Object(v.jsx)("div",{className:"badge badge-danger",children:"No"})}},{dataField:"Image",text:"Image",formatter:function(e,t,a,n){return t.Image?Object(v.jsx)("a",{children:Object(v.jsx)("img",{alt:!0,src:t.Image})}):Object(v.jsx)("a",{})},events:{onClick:function(e,t,a,n,s){!function(e){P(e.Image),Q({display:"block","padding-left":"0px;"}),$({display:"block"})}(n)}}}];j()({sizePerPage:2,hideSizePerPage:!0,prePageText:"Previous",nextPageText:"Next",withFirstAndLast:!1,hidePageListOnlyOnePage:!1});Object(l.useEffect)((function(){d.a.getLoadForInspection({UnitId:parseInt(t.unitId),UCId:parseInt(t.ucId)}).then((function(e){je(!1),I(JSON.parse(e.data.data.data))}))}),[S]);return Object(v.jsxs)("div",{className:"container-fluid page-body-wrapper",children:[Object(v.jsx)("div",{className:"main-panel",children:Object(v.jsx)("div",{className:"content-wrapper",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-lg-12 grid-margin stretch-card",children:Object(v.jsxs)("div",{className:"card",children:[Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("h4",{className:"card-title",children:"Inspection Process"}),Object(v.jsx)("div",{className:"table-responsive",children:me?Object(v.jsx)(f.a,{duration:3,height:50,count:50}):Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(p.a,{bootstrap4:!0,keyField:"id",data:N,striped:!0,condensed:!0,columns:ke,defaultSorted:[{dataField:"name",order:"desc"}]})})})]}),N?Object(v.jsx)("div",{class:"text-center mb-5",children:Object(v.jsxs)("button",{type:"button",class:"btn btn-success btn-sm",onClick:function(e){q({display:"block","padding-left":"0px;"}),$({display:"block"})},children:["Complete Inspection",Object(v.jsx)("i",{class:"icon-control-play ml-1"})]})}):Object(v.jsx)(v.Fragment,{})]})})})})}),Object(v.jsx)("div",{className:"modal-backdrop fade show",style:ae}),Object(v.jsx)("div",{className:"modal fade show",id:"exampleModal-5",style:_,tabIndex:-1,role:"dialog","aria-labelledby":"exampleModalLabel-4","aria-hidden":"true",children:Object(v.jsx)("div",{className:"modal-dialog",role:"document",children:Object(v.jsxs)("div",{className:"modal-content",children:[Object(v.jsxs)("div",{class:"video-wrap",children:[Object(v.jsx)("video",{id:"video",playsinline:!0,loop:!0,autoPlay:!0}),Object(v.jsx)("canvas",{id:"canvas",class:"d-none",width:"630",height:"480"})]}),Object(v.jsxs)("div",{className:"modal-footer",children:[Object(v.jsx)("button",{type:"submit",id:"flip-btn",onClick:fe,className:"btn btn-info",children:"Switch Camera"}),Object(v.jsx)("button",{type:"submit",onClick:function(e){var t=document.getElementById("video"),a=document.getElementById("canvas");a.getContext("2d").drawImage(t,0,0,640,480);var n=a.toDataURL();console.log(n),ie(Object(i.a)(Object(i.a)({},ce),{},{Image:n})),Y({display:"none","padding-left":"0px;"}),ne({display:"none"}),B({display:"block","padding-left":"0px;"}),$({display:"block"})},className:"btn btn-primary",children:"Capture"}),Object(v.jsx)("button",{type:"button",onClick:function(e){Y({display:"none","padding-left":"0px;"}),ne({display:"none"}),B({display:"block","padding-left":"0px;"}),$({display:"block"})},className:"btn btn-light","data-dismiss":"modal",children:"Close"})]})]})})}),Object(v.jsx)("div",{className:"modal-backdrop fade show",style:Z}),Object(v.jsx)("div",{className:"modal fade show",id:"exampleModal-4",style:E,tabIndex:-1,role:"dialog","aria-labelledby":"exampleModalLabel-4","aria-hidden":"true",children:Object(v.jsx)("div",{className:"modal-dialog",role:"document",children:Object(v.jsxs)("div",{className:"modal-content",children:[Object(v.jsxs)("div",{className:"modal-header",children:[Object(v.jsx)("h5",{className:"modal-title",id:"exampleModalLabel-4",children:"CheckList Results"}),Object(v.jsx)("button",{type:"button",onClick:xe,className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(v.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g(!0),d.a.InsertCheckListResults(ce).then((function(e){g(!1),200===e.status&&200===e.data.statusCode?(x.b.success("Successfully Updated.",O.a),je(!0),L(Math.floor(10*Math.random()+1)),xe()):x.b.error("Error calling api",O.a)})).catch((function(e){e.response?x.b.error("There is a problem while calling the api request.",{appearance:"error",autoDismiss:!0}):e.request?(je(!0),xe(),x.b.error("Network problems happen when something disrupts the connection between your computer and the content you're trying to access.",{appearance:"error",autoDismiss:!0})):x.b.error("Error",e.message)})),e.preventDefault()},children:[Object(v.jsxs)("div",{className:"modal-body pt-0",children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"recipient-name",className:"col-form-label",children:"Result:"}),Object(v.jsxs)("select",{type:"text",onChange:function(e){var t=Boolean(parseInt(e.target.value));ie(Object(i.a)(Object(i.a)({},ce),{},{Result:t}))},className:"form-control",id:"recipient-name",children:[Object(v.jsx)("option",{value:"1",children:"Yes"}),Object(v.jsx)("option",{value:"0",children:"No"})]})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"message-text",className:"col-form-label",children:"Remarks:"}),Object(v.jsx)("textarea",{className:"form-control",value:ce.Remarks,onInput:function(e){var t=e.target.value;ie(Object(i.a)(Object(i.a)({},ce),{},{Remarks:t}))},id:"message-text",defaultValue:""})]}),Object(v.jsxs)("div",{className:"form-group",children:[ce.Image?Object(v.jsx)("div",{children:Object(v.jsx)("img",{height:100,src:ce.Image})}):Object(v.jsx)(v.Fragment,{}),Object(v.jsx)("label",{htmlFor:"message-text",className:"col-form-label d-none",children:"Capture Image"}),Object(v.jsx)("button",{type:"button",class:"btn d-none mr-4 btn-info",onClick:function(e){var t=document.querySelector("#flip-btn");!0===navigator.mediaDevices.getSupportedConstraints().facingMode&&(t.disabled=!1);var a={audio:!1,video:{width:500,height:400}};function n(){return(n=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia(a);case 3:he(e.sent),Oe(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("navigator.getUserMedia error:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()},children:"Capture Image"}),Object(v.jsxs)("label",{for:"input-file",class:"btn btn-info",children:["Uplaod Image",Object(v.jsx)("input",{type:"file",onChange:function(e){return ge.apply(this,arguments)},className:"form-control d-none",accept:".png, .jpg, .jpeg",id:"input-file",defaultValue:""})]})]})]}),Object(v.jsxs)("div",{className:"modal-footer",children:[Object(v.jsx)("button",{type:"submit",disabled:m,className:"btn btn-success",children:"Submit"}),Object(v.jsx)("button",{type:"button",onClick:xe,className:"btn btn-light","data-dismiss":"modal",children:"Close"})]})]})]})})}),Object(v.jsx)("div",{className:"modal fade show",id:"exampleModal-4",style:A,tabIndex:-1,role:"dialog","aria-labelledby":"exampleModalLabel-4","aria-hidden":"true",children:Object(v.jsx)("div",{className:"modal-dialog",role:"document",children:Object(v.jsxs)("div",{className:"modal-content",children:[Object(v.jsxs)("div",{className:"modal-header",children:[Object(v.jsx)("h5",{className:"modal-title",id:"exampleModalLabel-4",children:"Complete Inspection"}),Object(v.jsx)("button",{type:"button",onClick:xe,className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(v.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g(!0),d.a.CompleteInspection(de).then((function(e){g(!1),200===e.status&&200===e.data.statusCode?(x.b.success("You have been successfully submitted as Inspection completed.",O.a),xe(),a.push("/scheduledList")):x.b.error("Error while calling the api.",O.a)})).catch((function(e){console.log(e),e.response?x.b.error("There is a problem while calling the api request.",{appearance:"error",autoDismiss:!0}):e.request?x.b.error("Network problems happen when something disrupts the connection between your computer and the content you're trying to access.",{appearance:"error",autoDismiss:!0}):x.b.error("Error",e.message)})),e.preventDefault()},children:[Object(v.jsx)("div",{className:"modal-body",children:Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"message-text",className:"col-form-label",children:"Comments:"}),Object(v.jsx)("textarea",{className:"form-control",value:de.Comments,onInput:function(e){return ye.apply(this,arguments)},id:"message-text",defaultValue:""})]})}),Object(v.jsxs)("div",{className:"modal-footer",children:[Object(v.jsx)("button",(e={type:"submit",disabled:m},Object(n.a)(e,"disabled",!de.Comments),Object(n.a)(e,"className","btn btn-success"),Object(n.a)(e,"children","Submit"),e)),Object(v.jsx)("button",{type:"button",onClick:xe,className:"btn btn-light","data-dismiss":"modal",children:"Close"})]})]})]})})}),Object(v.jsx)("div",{className:"modal fade show",id:"exampleModal-4",style:K,tabIndex:-1,role:"dialog","aria-labelledby":"exampleModalLabel-4","aria-hidden":"true",children:Object(v.jsx)("div",{className:"modal-dialog",role:"document",children:Object(v.jsxs)("div",{className:"modal-content",children:[Object(v.jsxs)("div",{className:"modal-header",children:[Object(v.jsx)("h5",{className:"modal-title",id:"exampleModalLabel-4",children:"Image View"}),Object(v.jsx)("button",{type:"button",onClick:xe,className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(v.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(v.jsx)("div",{className:"modal-body",children:Object(v.jsx)("img",{alt:"",src:M,width:"300"})}),Object(v.jsx)("div",{className:"modal-footer",children:Object(v.jsx)("button",{type:"button",onClick:xe,className:"btn btn-light","data-dismiss":"modal",children:"Close"})})]})})})]})}},45:function(e,t,a){"use strict";var n=a(48),s=a.n(n),r=a(49),c=a(47),i=a(50),o=a(51),l=a.n(o),d="https://holidayhomesrak.com:3001/api";l.a.interceptors.request.use((function(e){var t=JSON.parse(localStorage.getItem("userData"))||{};if(t&&t.token){var a="Bearer "+t.token;e.headers.Authorization=a}return e}));var u=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,[{key:"getDashBoard",value:function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post(d+"/app/LoadAssignedList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getScheduledList",value:function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post(d+"/app/ScheduledList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getLoadForInspection",value:function(){var e=Object(r.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post(d+"/app/LoadForInspection",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"InsertCheckListResults",value:function(){var e=Object(r.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post(d+"/app/InsertCheckListResults",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"CompleteInspection",value:function(){var e=Object(r.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post(d+"/app/CompleteInspection",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInspectedList",value:function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post(d+"/app/VisitedHistory");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getReScheduledList",value:function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post(d+"/app/ReScheduledList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"ScheduleSiteVisit",value:function(){var e=Object(r.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post(d+"/app/ScheduleSiteVisit",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInspectionReport",value:function(){var e=Object(r.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post(d+"/app/Inspectedlist",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPmBoard",value:function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/test/pm");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAdminBoard",value:function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/test/admin");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.a=new u},57:function(e,t,a){"use strict";a(1);t.a={style:{borderRadius:"10px",background:"#333",fontSize:"14px",color:"#fff"}}}}]);
//# sourceMappingURL=8.f1879282.chunk.js.map